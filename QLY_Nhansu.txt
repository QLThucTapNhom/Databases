USE master
--I. Tạo Database
CREATE DATABASE QuanLyNhanSu_TTN

-- Thư mục Database được lưu trữ
 --ON  PRIMARY 
--( NAME = N'QuanLyNhanSu_TTN', FILENAME = N'D:\QuanLyNhanSu_TTN\Databases\N06_S4_Qldiem_tieuhoc.mdf' , SIZE = 100 , MAXSIZE = 2GB, FILEGROWTH = 10 )
 --LOG ON 
--( NAME = N'QuanLyNhanSu_TTN', FILENAME = N'D:\QuanLyNhanSu_TTN\Databases\N06_S4_Qldiem_tieuhoc_log.ldf' , SIZE = 200 , MAXSIZE = UNLIMITED , FILEGROWTH = 20)
--GO

-- Sử dụng Database
USE QuanLyNhanSu_TTN
GO

CREATE TABLE CHUCVU
( 
    MaCV NCHAR(15) NOT NULL PRIMARY KEY,
	TenCV NVARCHAR(50)
)
GO

CREATE TABLE PHONGBAN
( 
    MaPB NCHAR(15) NOT NULL PRIMARY KEY,
	TenPB NVARCHAR(50),
	DiaChiPB NVARCHAR(50),
	SDTPhongBan NCHAR(10)

)
GO

CREATE TABLE TRINHDOHOCVAN
( 
    MaTDHV NCHAR(15) NOT NULL PRIMARY KEY,
	TenTDHV NVARCHAR(50),
	ChuyenNganh NVARCHAR(50),
)
GO

CREATE TABLE LUONG
( 
    BacLuong INT NOT NULL PRIMARY KEY,
	LuongCoBan DECIMAL(18,3),
	HSLuong FLOAT,
	HSPhuCap FLOAT,
)
GO

CREATE TABLE NHANVIEN
( 
    MaNV NCHAR(15) NOT NULL PRIMARY KEY,
	TenNV NVARCHAR(20),
	HoDemNV NVARCHAR(50),
	NgaySinh DATE,
	GioiTinh NVARCHAR(10),
	DanToc NVARCHAR(10),
	QueQuan NVARCHAR(50),
	SDT NCHAR(10),
	Email NCHAR(20),
	
	MaPB NCHAR(15),
	MaCV NCHAR(15),
	MaTDHV NCHAR(15),
	BacLuong INT
)
GO
CREATE TABLE NGAYVAOLAM
( 
    MaNV NCHAR(15),
	MaCV NCHAR(15),
	NgayVaoLam DATE,
	PRIMARY KEY(MaNV,MaCV)
)
GO

ALTER TABLE dbo.NHANVIEN ADD FOREIGN KEY(MaPB) REFERENCES dbo.PHONGBAN(MaPB)
ALTER TABLE dbo.NHANVIEN ADD FOREIGN KEY(MaCV) REFERENCES dbo.CHUCVU(MaCV)
ALTER TABLE dbo.NHANVIEN ADD FOREIGN KEY(MaTDHV) REFERENCES dbo.TRINHDOHOCVAN(MaTDHV)
ALTER TABLE dbo.NHANVIEN ADD FOREIGN KEY(BacLuong) REFERENCES dbo.LUONG(BacLuong)

ALTER TABLE dbo.NGAYVAOLAM ADD FOREIGN KEY(MaNV) REFERENCES dbo.NHANVIEN(MaNV)
ALTER TABLE dbo.NGAYVAOLAM ADD FOREIGN KEY(MaCV) REFERENCES dbo.CHUCVU(MaCV)
